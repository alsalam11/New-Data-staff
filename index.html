<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jspdf-arabic@1.0.0/dist/jspdf-arabic.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      direction: rtl;
    }
    label {
      display: block;
      margin-top: 10px;
    }
    input, select {
      width: 100%;
      padding: 6px;
      margin-top: 5px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
    }
  </style>
</head>
<body>

  <h2>Ù†Ù…ÙˆØ°Ø¬ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù</h2>

  <form id="employeeForm">
    <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø±Ø¨Ø§Ø¹ÙŠ ÙˆØ§Ù„Ù„Ù‚Ø¨:</label>
    <input type="text" id="fullName" required>

    <label>Ø§Ø³Ù… Ø§Ù„Ø£Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ:</label>
    <input type="text" id="motherName" required>

    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆÙ„Ø¯:</label>
    <input type="date" id="birthDate" required>

    <label>Ø§Ù„Ø¬Ù†Ø³:</label>
    <select id="gender" required>
      <option value="">-- Ø§Ø®ØªØ± --</option>
      <option value="Ø°ÙƒØ±">Ø°ÙƒØ±</option>
      <option value="Ø£Ù†Ø«Ù‰">Ø£Ù†Ø«Ù‰</option>
    </select>

    <label>Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:</label>
    <input type="text" id="education" required>

    <label>Ø§Ø³Ù… Ø§Ù„ÙƒÙ„ÙŠØ© Ø£Ùˆ Ø§Ù„Ù…Ø¹Ù‡Ø¯:</label>
    <input type="text" id="institute" required>

    <label>Ø§Ù„Ø§Ø®ØªØµØ§Øµ Ø§Ù„Ø¯Ù‚ÙŠÙ‚:</label>
    <input type="text" id="specialization" required>

    <label>ØªØ§Ø±ÙŠØ® Ø£Ù…Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ†:</label>
    <input type="date" id="appointmentDate" required>

    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ø£ÙˆÙ„ Ù…Ø±Ø©:</label>
    <input type="date" id="startDate" required>

    <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø¯Ø±Ø³Ø©:</label>
    <input type="text" id="school" required>

    <button type="submit">Ø¥Ø±Ø³Ø§Ù„ ÙˆØªØµØ¯ÙŠØ± PDF ÙˆCSV</button>
  </form>

  <script>
    document.getElementById("employeeForm").addEventListener("submit", async function(e) {
      e.preventDefault();

      const data = {
        fullName: document.getElementById("fullName").value,
        motherName: document.getElementById("motherName").value,
        birthDate: document.getElementById("birthDate").value,
        gender: document.getElementById("gender").value,
        education: document.getElementById("education").value,
        institute: document.getElementById("institute").value,
        specialization: document.getElementById("specialization").value,
        appointmentDate: document.getElementById("appointmentDate").value,
        startDate: document.getElementById("startDate").value,
        school: document.getElementById("school").value
      };

      // ğŸŸ¦ 1. Ø¥Ù†Ø´Ø§Ø¡ PDF ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFont("Amiri", "normal");
      doc.setFontSize(14);

      let y = 20;
      doc.text("Ø§Ø³ØªÙ…Ø§Ø±Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆØ¸Ù", 105, y, { align: "center" });
      y += 10;

      for (let [key, value] of Object.entries(data)) {
        const label = document.querySelector("label[for=" + key + "]")?.innerText || "";
        const labelText = document.querySelector(`label[for="${key}"]`)?.innerText || "";
        const fullText = `${key.replace(/([A-Z])/g, ' $1')}: ${value}`;
        doc.text(fullText, 20, y, { align: "right" });
        y += 10;
      }

      doc.save("Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ù…ÙˆØ¸Ù.pdf");

      // ğŸŸ¨ 2. Ø¥Ù†Ø´Ø§Ø¡ CSV
      const csvHeader = "Ø§Ù„Ø§Ø³Ù…,Ø§Ø³Ù… Ø§Ù„Ø£Ù…,ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆÙ„Ø¯,Ø§Ù„Ø¬Ù†Ø³,Ø§Ù„ØªØ­ØµÙŠÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ,Ø§Ù„ÙƒÙ„ÙŠØ©,Ø§Ù„Ø§Ø®ØªØµØ§Øµ,Ø£Ù…Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ†,Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©,Ø§Ù„Ù…Ø¯Ø±Ø³Ø©\n";
      const csvRow = `${data.fullName},${data.motherName},${data.birthDate},${data.gender},${data.education},${data.institute},${data.specialization},${data.appointmentDate},${data.startDate},${data.school}`;
      const blob = new Blob([csvHeader + csvRow], { type: "text/csv;charset=utf-8;" });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "Ø¨ÙŠØ§Ù†Ø§Øª_Ø§Ù„Ù…ÙˆØ¸Ù.csv";
      link.click();
    });
  </script>
</body>
</html>
